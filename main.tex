\documentclass[12pt,headings=optiontohead,openany,oneside,a4paper]{book}
%TODO: page layout
\usepackage[backref=page,
unicode,
pdfauthor={Jakob von Raumer},
pdftitle={Reducing Inductive-Inductive Types to Indexed Inductive Types},
pdfsubject={Mathematics, Computer Science},
pdfkeywords={interactive theorem proving}]{hyperref}

%code listings
\usepackage{mathpartir}
\usepackage{newunicodechar}
%\renewcommand{\MintedPygmentize}{./pygments-main/pygmentize}
\usepackage{fontspec,xunicode}
\usepackage[osf]{mathpazo}
%\usepackage{shellesc}
\usepackage{minted}
\setmainfont[Ligatures=TeX]{TeX Gyre Pagella}
\setmonofont{Iosevka}
%\newfontfamily{\freeserif}{DejaVu Sans Mono}
%\newunicodechar{⦃}{\ensuremath{\texttt{\{}\mkern-7mu\texttt{|}}}
	%{\makebox[.5em]{\freeserif⦃}}
%\newunicodechar{⦄}{\ensuremath{\texttt{|}\mkern-7mu\texttt{\}}}}
	%{\makebox[.5em]{\freeserif⦄}}
%\newunicodechar{→}{\texttt{\freeserif{→}}}
%\newunicodechar{⟶}{\texttt{\freeserif{⟶}}}
%\newunicodechar{⁻}{\texttt{\freeserif{⁻}}}
%\newunicodechar{▹}{\freeserif{▹}}
%\newunicodechar{ℕ}{\texttt{\freeserif{ℕ}}}
%\newunicodechar{⟨}{\texttt{\freeserif{⟨}}}
%\newunicodechar{⟩}{\texttt{\freeserif{⟩}}}
%\newunicodechar{⬝}{\ensuremath{\ct}}
%\newunicodechar{∼}{\freeserif{∼}}
%\newunicodechar{≃}{\freeserif{≃}}
%\newunicodechar{≅}{\freeserif{≅}}
%\newunicodechar{∘}{\freeserif{∘}}
%\newunicodechar{ʰ}{\freeserif{ʰ}}
%\newunicodechar{ᵍ}{\freeserif{ᵍ}}
%\newunicodechar{⇒}{\freeserif{⇒}}
%\newunicodechar{⋆}{\freeserif{⋆}}
%\newunicodechar{∘}{\freeserif{∘}}
%\newunicodechar{←}{\freeserif{←}}
%\newunicodechar{∙}{\freeserif{∙}}
%\newunicodechar{▶}{\freeserif{▶}}
%\newunicodechar{∀}{\freeserif{∀}}

%workaround to remove red boxes
\AtBeginEnvironment{minted}{\renewcommand{\fcolorbox}[4][]{#4}}
\usemintedstyle{default}
\newminted{lean}{
	linenos,
	numbersep=5pt,
	frame=single,
	fontsize=\footnotesize,
	framesep=1mm,
	samepage,
	autogobble}
\newminted[leancodebr]{lean}{
	linenos,
	numbersep=5pt,
	frame=single,
	fontsize=\footnotesize,
	framesep=1mm,
	autogobble}
\newcommand{\leani}[1]{\mintinline{lean}{#1}}
\newminted{agda}{
	linenos,
	numbersep=5pt,
	frame=single,
	fontsize=\footnotesize,
	framesep=1mm,
	samepage,
	autogobble}
\newcommand{\agdai}[1]{\mintinline{agda}{#1}}
\linespread{1.07}
\usepackage[dvipsnames]{xcolor}
\usepackage{graphicx}
\usepackage{array}
\usepackage[all,2cell,cmtip]{xy}
\usepackage{tikz}
\usetikzlibrary{decorations.pathmorphing,arrows}
\usepackage[numbered]{bookmark}
\usepackage{fancyhdr}
\usepackage{amssymb,amsmath,amsthm,mathrsfs,wasysym}
\usepackage{enumitem,mathtools,xspace}
\usepackage[nottoc]{tocbibind}
\usepackage{cleveref}
\usepackage{aliascnt}
\usepackage{natbib}
\usepackage{mathtools}
\usepackage{footnote}
\usepackage{booktabs}
\usepackage{xifthen}
%\usepackage[top=1in, bottom=1.25in, left=1.25in, right=1.25in]{geometry} %TODO decide

\fancyhead[LO]{\leftmark}
\fancyhead[RE]{\rightmark}
\fancyhead[LE,RO]{\thepage}
\cfoot{}
\pagestyle{fancy}

\def\defthm#1#2#3{
	\newaliascnt{#1}{thm}
	\newtheorem{#1}[#1]{#2}
	\aliascntresetthe{#1}
	\crefname{#1}{#2}{#3}
}

\newtheorem{thm}{Theorem}[section]
\crefname{thm}{Theorem}{Theorems}
\defthm{lemma}{Lemma}{Lemmas}
\defthm{axiom}{Axiom}{Axioms}
\defthm{corollary}{Corollary}{Corollaries}
\theoremstyle{definition}
\defthm{defn}{Definition}{Definitions}
\defthm{example}{Example}{Examples}
\defthm{remark}{Remark}{Remarks}

\newcommand{\upperf}{\partial^-_1}
\newcommand{\lowerf}{\partial^+_1}
\newcommand{\leftf}{\partial^-_2}
\newcommand{\rightf}{\partial^+_2}
\newcommand{\inv}{^{-1}}
\newcommand{\DCat}{\mathbf{DCat}}
\newcommand{\DGpd}{\mathbf{DGpd}}
\newcommand{\XMod}{\mathbf{XMod}}
\newcommand{\twotype}{\mathbf{2}}
\newcommand{\unit}{\mathbf{1}}
\newcommand{\emptytype}{\mathbf{0}}
\newcommand{\UU}{\mathcal{U}}
\newcommand{\isProp}{\mathsf{isProp}}
\newcommand{\isSet}{\mathsf{isSet}}
\newcommand{\PropU}{\mathsf{Prop}}
\newcommand{\SetU}{\mathsf{Set}}
\newcommand{\seg}{\mathsf{seg}}
\newcommand{\isContr}{\mathsf{isContr}}
\newcommand{\isIso}{\mathsf{isIso}}
\newcommand{\idtoiso}{\mathsf{idtoiso}}
\newcommand{\idtoeqv}{\mathsf{idtoeqv}}
\newcommand{\ua}{\mathsf{ua}}
\newcommand{\alliso}{\mathsf{alliso}}
\newcommand{\refl}{\mathsf{refl}}
\newcommand{\ap}{\mathsf{ap}}
\newcommand{\apd}{\mathsf{apd}}
\newcommand{\happly}{\mathsf{happly}}
\newcommand{\ind}{\mathsf{ind}}
\newcommand{\rec}{\mathsf{rec}}
\newcommand{\pr}{\mathsf{pr}}
\newcommand{\inl}{\mathsf{inl}}
\newcommand{\inr}{\mathsf{inr}}
\newcommand{\ishae}{\mathsf{ishae}}
\newcommand{\apiop}{\ap_{\iota'}}
\DeclareMathOperator{\comp}{comp}
\newcommand{\id}{\mathsf{id}}
\DeclareMathOperator{\invv}{inv_1}
\DeclareMathOperator{\invh}{inv_2}
\DeclareMathOperator{\obj}{obj}
\DeclareMathOperator{\EI}{EI}
\DeclareMathOperator{\IE}{IE}
\DeclareMathOperator{\op}{op}
\DeclareMathOperator{\inj}{inj}
\newcommand{\assoc}{\mathsf{assoc}}
\newcommand{\assocv}{\mathsf{assoc}_1}
\newcommand{\assoch}{\mathsf{assoc}_2}
\newcommand{\idLeft}{\mathsf{idLeft}}
\newcommand{\idLeftv}{\mathsf{idLeft}_1}
\newcommand{\idLefth}{\mathsf{idLeft}_2}
\newcommand{\idRight}{\mathsf{idRight}}
\newcommand{\idRightv}{\mathsf{idRight}_1}
\newcommand{\idRighth}{\mathsf{idRight}_2}
\newcommand{\leftInv}{\mathsf{leftInv}}
\newcommand{\leftInvv}{\mathsf{leftInv}_1}
\newcommand{\leftInvh}{\mathsf{leftInv}_2}
\newcommand{\rightInv}{\mathsf{rightInv}}
\newcommand{\rightInvv}{\mathsf{rightInv}_1}
\newcommand{\rightInvh}{\mathsf{rightInv}_2}
\newcommand{\respectId}{\mathsf{respectId}}
\newcommand{\respectIdv}{\mathsf{respectId}_1}
\newcommand{\respectIdh}{\mathsf{respectId}_2}
\newcommand{\respectComp}{\mathsf{respectComp}}
\newcommand{\respectCompv}{\mathsf{respectComp}_1}
\newcommand{\respectComph}{\mathsf{respectComp}_2}
\newcommand{\isequiv}{\mathsf{isequiv}}
\newcommand{\isodd}{\mathsf{isodd}}
\newcommand{\thin}{\mathsf{thin}}
\newcommand{\Sbase}{\mathsf{base}}
\newcommand{\Sloop}{\mathsf{loop}}
\newcommand{\Smerid}{\mathsf{merid}}
\newcommand{\vecty}{\mathsf{vec}}
\newcommand{\nil}{\mathsf{nil}}
\newcommand{\cons}{\mathsf{cons}}
\newcommand{\ct}{
	\mathchoice{\mathbin{\raisebox{0.5ex}{$\displaystyle\centerdot$}}}
		{\mathbin{\raisebox{0.5ex}{$\centerdot$}}}
		{\mathbin{\raisebox{0.25ex}{$\scriptstyle\,\centerdot\,$}}}
		{\mathbin{\raisebox{0.1ex}{$\scriptscriptstyle\,\centerdot\,$}}}
}
\newcommand{\trunc}[2]{\left\Vert #2\right\Vert_{#1}}
\newcommand{\squash}[1]{\trunc{}{#1}}
\newcommand{\isntype}[1]{\mathsf{is}\mbox{-}{#1}\mbox{-}\mathsf{type}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\Sph}{\mathbb{S}}
\newcommand{\Set}{\mathbf{Set}}
\newcommand{\Cat}{\mathbf{Cat}}
\newcommand{\Fam}{\mathbf{Fam}}
\newcommand{\Alg}{\mathbf{Alg}}
\newcommand{\CT}{\mathbf{CT}}
\newcommand{\CTw}{\mathbf{CTw}}
\newcommand{\old}[1]{\overline{#1}}
\newcommand{\oldold}[1]{\overline{\overline{#1}}}
\newcommand{\gr}[1]{{\color{ForestGreen}#1}}
\newcommand{\grm}[1]{\ensuremath{\gr{#1}}}
\newcommand{\blm}[1]{\ensuremath{{\color{Black}#1}}}
\newcommand{\tqm}[1]{\ensuremath{{\color{Blue}#1}}}
%\newcommand{\grinfer}[2]{\grm{\inferrule{{#1}}{{#2}}}}
\newcommand{\Sc}{\mathsf{S}}
\newcommand{\Pc}{\mathsf{P}}
\newcommand{\CC}{\mathsf{A}} %TODO maybe jus replace
\renewcommand{\AA}{\mathsf{A}}
\newcommand{\EE}{\mathsf{E}}
\newcommand{\PP}{\mathsf{P}}
\newcommand{\mm}{\mathsf{m}}
\newcommand{\MM}{\mathsf{M}}
\newcommand{\DD}{\mathsf{D}}
\newcommand{\WW}{\mathsf{W}}
\renewcommand{\SS}{\mathsf{S}}
\newcommand{\con}[1]{\mathsf{con}(\grm{#1})}
\newcommand{\contwo}[2]{\mathsf{con}(#1,\grm{#2})}
\newcommand{\conthree}[3]{\mathsf{con}(#1, #2, \grm{#3})}
\newcommand{\IFconS}[1]{\mathsf{con_\Sc}(\tqm{#1})}
\newcommand{\IFcon}[1]{\mathsf{con}(\tqm{#1})}
\newcommand{\IFelimS}[2]{\ifthenelse{\isempty{#2}}{\mathsf{elim_\Sc}(\tqm{#1})}{\mathsf{elim_\Sc}(\tqm{#1}, #2)}}
\newcommand{\IFelim}[2]{\ifthenelse{\isempty{#2}}{\mathsf{elim}(\tqm{#1})}{\mathsf{elim}(\tqm{#1}, #2)}}
\newcommand{\elim}{\mathsf{elim}}
\newcommand{\flatten}[1]{\blm{\mathsf{flatten}(\grm{#1})}}
\newcommand{\annotate}[1]{\blm{\mathsf{an}(\grm{#1})}}
\newcommand{\anntwo}[2]{\blm{\mathsf{an}(#1, \grm{#2})}}
\newcommand{\app}{\mathrel{@}}
\newcommand{\SCon}{\vdash_\Sc}
\newcommand{\var}{\mathsf{var}}
\newcommand{\vz}{\mathsf{vz}}
\newcommand{\vs}{\mathsf{vs}}
\newcommand{\El}{\mathsf{El}} %TODO change to operator?
\newcommand{\LSub}[3]{\mathsf{LSub}_{\tqm{#1}}(\tqm{#2}, \tqm{#3})}
\newcommand{\wk}{\mathsf{wk}}
\newcommand{\IFSub}[3]{#2 \overset{#1}{\longrightarrow} #3}
\newcommand{\IISub}[3]{#2 \overset{#1}{\longrightarrow} #3}
\newcommand{\IIapp}{\mathsf{app}}
\newcommand{\ExtPi}[2]{\hat{\Pi}(\blm{#1},\, #2)}
\newcommand{\ExtPiS}[2]{\hat{\Pi}_\Sc(\blm{#1},\, #2)}
\newcommand{\ExtPiP}[2]{\hat{\Pi}_\Pc(\blm{#1},\, #2)}
\newcommand{\bltau}{\blm{\tau}}
\newcommand{\blalpha}{\blm{\alpha}}
\newcommand{\blgamma}{\blm{\gamma}}

\renewcommand{\backrefalt}[4]{
	\ifcase #1
		(No citations.)
	\or
		(Cited on page\ #2.)
	\else
		(Cited on pages\ #2.)
	\fi
}

\begin{document}

\title{Reducing Inductive-Inductive Types to Indexed Inductive Types}
\author{Jakob von Raumer}

\frontmatter
\maketitle

\tableofcontents

\mainmatter

\chapter{Introduction}

\input{intro.tex}

\chapter{Basic Type Theory}

\chapter{Higher Inductive Types}

\chapter{Path Spaces of HITs}

\chapter{Specification of Inductive-Inductive Types}

\input{iit.tex}
%\input{iit_named.tex}

\chapter{Specification of Inductive Families}

\input{if.tex}

\chapter{Reducing Inductive-Inductive Types to Inductive Families}
\chaptermark{Reducing Inductive-Inductive Types}

\input{reduction.tex}

\bibliographystyle{unsrtnat}
\bibliography{references}

\end{document}

